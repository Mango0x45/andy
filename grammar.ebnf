(* Anything between ‘??’ represents a regex.  Regex character classes are
   unicode aware (‘\s’ matches all unicode spaces) *)

program = cmdlist;
cmdlist = pipeline, {lop, pipeline}, end;
pipeline = cmd, {'|', cmd};
cmd = simple
    | 'if', cmdlist, cmdlist;
simple = value, {value}, {redir};

redir =
	( '<'
	| '>'
	| '>!'
	| '>>'
	), value;
value = arg | string;

string = '"', ?[^"]*?, '"';
arg = ?[^|><;\n\s]+?;
lop = '&&' | '||';
end = ';' | '\n';
